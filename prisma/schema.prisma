// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "./dev.db"
}

model User {
  id          Int               @id @default(autoincrement())
  firstName   String
  lastName    String
  email       String
  password    String
  botSettings UserBotSettings[]
}

model UserBotSettings {
  id      Int    @id @default(autoincrement())
  botToken   String
  botName String
  address String
  user    User   @relation(fields: [userId], references: [id])
  userId  Int
}

model Client {
  id           Int           @id @default(autoincrement())
  telegramId   String        @unique
  name         String
  appointments Appointment[] // Клиент может иметь множество записей на прием
}

model Appointment {
  id          Int      @id @default(autoincrement())
  month       String
  day         Int
  hour        Int
  client      Client   @relation(fields: [clientId], references: [id]) // Связь с клиентом по ID
  clientId    Int // ID клиента
  clientName  String
  service     Services @relation(fields: [serviceId], references: [id]) // Связь с услугой по ID
  serviceId   Int // ID услуги
  serviceName String
  duration    Int
}

model Services {
  id           Int           @id @default(autoincrement())
  name         String
  description  String
  price        Int
  duration     Int // Длительность услуги
  appointments Appointment[]
}

model Availability {
  id          Int     @id @default(autoincrement())
  month       String // Месяц в формате YYYY-MM
  day         Int // День месяца
  hour        Int // Час в сутках (от 0 до 23)
  isAvailable Boolean // Статус доступности
}
